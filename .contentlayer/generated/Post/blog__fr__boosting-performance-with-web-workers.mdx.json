{
  "title": "Améliorer les Performances avec les Web Workers",
  "date": "2024-11-25T00:00:00.000Z",
  "language": "fr",
  "category": "Development",
  "image": "/images/articles/web-workers.jpg",
  "description": "Découvrez comment tirer parti des Web Workers pour exécuter des tâches intensives en CPU sans bloquer le thread principal dans les applications JavaScript.",
  "timeToRead": 5,
  "alternates": {
    "en": "boosting-performance-with-web-workers",
    "fr": "boosting-performance-with-web-workers"
  },
  "body": {
    "raw": "\nÀ mesure que les applications web deviennent plus complexes, l'exécution de calculs lourds sur le thread principal peut entraîner des interfaces utilisateur non réactives et une mauvaise expérience utilisateur. Les Web Workers offrent une solution puissante en nous permettant d'exécuter du JavaScript dans des threads en arrière-plan. Explorons comment les implémenter efficacement.\n\n## Le Problème du Thread Unique\n\nJavaScript est mono-thread par nature. Considérez cette tâche intensive en CPU :\n\n```javascript\nfunction calculatePrimes(max) {\n  const primes = []\n  for (let i = 2; i <= max; i++) {\n    let isPrime = true\n    for (let j = 2; j <= Math.sqrt(i); j++) {\n      if (i % j === 0) {\n        isPrime = false\n        break\n      }\n    }\n    if (isPrime) primes.push(i)\n  }\n  return primes\n}\n\n// Cela va geler l'interface utilisateur\nconst result = calculatePrimes(1000000)\n```\n\nExécuter cela directement dans votre application bloquerait le thread principal, gelant l'interface utilisateur jusqu'à la fin.\n\n## Entrent en Scène les Web Workers\n\nVoici comment déplacer ce calcul vers un Web Worker :\n\n```javascript\n// worker.js\nself.onmessage = function (e) {\n  const max = e.data\n  const primes = calculatePrimes(max)\n  self.postMessage(primes)\n}\n\nfunction calculatePrimes(max) {\n  // Même implémentation que ci-dessus\n}\n```\n\n```javascript\n// main.js\nconst worker = new Worker('worker.js')\n\nworker.onmessage = function (e) {\n  console.log('Nombres premiers calculés:', e.data)\n}\n\n// Cela ne bloquera pas l'interface utilisateur\nworker.postMessage(1000000)\n```\n\n## Patterns Avancés de Workers\n\n### 1. Pools de Workers\n\nPour plusieurs tâches parallèles :\n\n```typescript\nclass WorkerPool {\n  private workers: Worker[] = []\n  private queue: Function[] = []\n  private activeWorkers = 0\n\n  constructor(private maxWorkers: number) {\n    this.initialize()\n  }\n\n  private initialize() {\n    for (let i = 0; i < this.maxWorkers; i++) {\n      this.workers.push(new Worker('worker.js'))\n    }\n  }\n\n  async execute(data: any): Promise<any> {\n    return new Promise((resolve) => {\n      const worker = this.getAvailableWorker()\n      if (worker) {\n        this.runTask(worker, data, resolve)\n      } else {\n        this.queue.push(() => this.execute(data).then(resolve))\n      }\n    })\n  }\n\n  private getAvailableWorker() {\n    return this.activeWorkers < this.maxWorkers\n      ? this.workers[this.activeWorkers++]\n      : null\n  }\n\n  private runTask(worker: Worker, data: any, resolve: Function) {\n    worker.onmessage = (e) => {\n      this.activeWorkers--\n      resolve(e.data)\n      if (this.queue.length > 0) {\n        const nextTask = this.queue.shift()\n        nextTask?.()\n      }\n    }\n    worker.postMessage(data)\n  }\n}\n```\n\n### 2. Objets Transférables\n\nPour de meilleures performances avec de grandes données :\n\n```javascript\n// Créer un grand buffer d'array\nconst buffer = new ArrayBuffer(100000000)\n\n// Transférer la propriété au worker (plus rapide que la copie)\nworker.postMessage(buffer, [buffer])\n\n// Le buffer n'est plus utilisable dans le thread principal\nconsole.log(buffer.byteLength) // 0\n```\n\n## Bonnes Pratiques\n\n1. **Choisir les Tâches Judicieusement**\n\n```javascript\n// Bon candidat pour Web Worker\nconst heavyTask = {\n  compute: () => {\n    // Calculs intensifs en CPU\n    // Pas de manipulation du DOM\n    // Pas de dépendances d'état partagé\n  },\n}\n\n// Mauvais candidat pour Web Worker\nconst lightTask = {\n  compute: () => {\n    document.querySelector('#result').innerHTML = 'Terminé'\n    // Manipulation du DOM non autorisée dans les workers\n  },\n}\n```\n\n2. **Gestion des Erreurs**\n\n```javascript\nworker.onerror = function (error) {\n  console.error('Erreur du worker:', error)\n  // Dégrader gracieusement ou redémarrer le worker\n}\n\nworker.onmessageerror = function (error) {\n  console.error('Erreur de message:', error)\n  // Gérer les erreurs de sérialisation des messages\n}\n```\n\n## Gains de Performance\n\nMesurons l'impact :\n\n```javascript\n// Sans Worker\nconsole.time('Thread Principal')\nconst result = calculatePrimes(1000000)\nconsole.timeEnd('Thread Principal')\n// Thread Principal: 1200ms (UI bloquée)\n\n// Avec Worker\nconsole.time('Worker')\nconst worker = new Worker('worker.js')\nworker.onmessage = (e) => {\n  console.timeEnd('Worker')\n  // Worker: 1250ms (UI réactive)\n}\nworker.postMessage(1000000)\n```\n\n## Conclusion\n\nLes Web Workers sont un outil puissant pour maintenir des applications réactives tout en effectuant des calculs lourds. Points clés à retenir :\n\n- Utilisez les Workers pour les tâches intensives en CPU\n- Implémentez des pools de workers pour le traitement parallèle\n- Utilisez des objets transférables pour les grandes données\n- Gérez les erreurs gracieusement\n- Mesurez les gains de performance\n\nRappelez-vous que les Workers ont leurs propres limites et surcoûts. Choisissez-les lorsque les avantages de l'exécution non bloquante l'emportent sur le coût du passage de messages et de la gestion des threads.\n",
    "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),w=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},l=(a,n,s,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!k.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(o=m(n,c))||o.enumerable});return a};var y=(a,n,s)=>(s=a!=null?d(h(a)):{},l(n||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>l(t({},\"__esModule\",{value:!0}),a);var i=N((x,r)=>{r.exports=_jsx_runtime});var W={};w(W,{default:()=>v,frontmatter:()=>g});var e=y(i()),g={date:\"2024-11-25\",language:\"fr\",title:\"Am\\xE9liorer les Performances avec les Web Workers\",category:\"Development\",image:\"/images/articles/web-workers.jpg\",description:\"D\\xE9couvrez comment tirer parti des Web Workers pour ex\\xE9cuter des t\\xE2ches intensives en CPU sans bloquer le thread principal dans les applications JavaScript.\",timeToRead:5,alternates:{en:\"boosting-performance-with-web-workers\",fr:\"boosting-performance-with-web-workers\"}};function p(a){let n=Object.assign({p:\"p\",h2:\"h2\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",ol:\"ol\",li:\"li\",strong:\"strong\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\xC0 mesure que les applications web deviennent plus complexes, l'ex\\xE9cution de calculs lourds sur le thread principal peut entra\\xEEner des interfaces utilisateur non r\\xE9actives et une mauvaise exp\\xE9rience utilisateur. Les Web Workers offrent une solution puissante en nous permettant d'ex\\xE9cuter du JavaScript dans des threads en arri\\xE8re-plan. Explorons comment les impl\\xE9menter efficacement.\"}),`\n`,(0,e.jsx)(n.h2,{children:\"Le Probl\\xE8me du Thread Unique\"}),`\n`,(0,e.jsx)(n.p,{children:\"JavaScript est mono-thread par nature. Consid\\xE9rez cette t\\xE2che intensive en CPU :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"calculatePrimes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"max\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" primes \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<=\"}),\" max\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" isPrime \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<=\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"sqrt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" j\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),\" j \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        isPrime `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),`\n        `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"break\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"isPrime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" primes\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),` primes\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Cela va geler l'interface utilisateur\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"calculatePrimes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1000000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})}),`\n`,(0,e.jsx)(n.p,{children:\"Ex\\xE9cuter cela directement dans votre application bloquerait le thread principal, gelant l'interface utilisateur jusqu'\\xE0 la fin.\"}),`\n`,(0,e.jsx)(n.h2,{children:\"Entrent en Sc\\xE8ne les Web Workers\"}),`\n`,(0,e.jsx)(n.p,{children:\"Voici comment d\\xE9placer ce calcul vers un Web Worker :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// worker.js\"}),`\nself`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onmessage\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" max \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"data\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" primes \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"calculatePrimes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"max\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  self`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"postMessage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"primes\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"calculatePrimes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"max\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// M\\xEAme impl\\xE9mentation que ci-dessus\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// main.js\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" worker \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Worker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'worker.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onmessage\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Nombres premiers calcul\\xE9s:'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Cela ne bloquera pas l'interface utilisateur\"}),`\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"postMessage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1000000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})}),`\n`,(0,e.jsx)(n.h2,{children:\"Patterns Avanc\\xE9s de Workers\"}),`\n`,(0,e.jsx)(n.h3,{children:\"1. Pools de Workers\"}),`\n`,(0,e.jsx)(n.p,{children:\"Pour plusieurs t\\xE2ches parall\\xE8les :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"WorkerPool\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" workers\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Worker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" queue\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Function\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" activeWorkers \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`\n\n  `,(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" maxWorkers\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"initialize\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"initialize\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maxWorkers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"workers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Worker\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'worker.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"execute\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"any\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Promise\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"any\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Promise\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resolve\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" worker \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getAvailableWorker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"worker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"runTask\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"worker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" resolve\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"execute\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resolve\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getAvailableWorker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"activeWorkers\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maxWorkers\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"workers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"activeWorkers\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword null nil\",children:\"null\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"runTask\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"worker\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Worker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"any\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" resolve\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Function\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    worker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onmessage\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"activeWorkers\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"--\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token function\",children:\"resolve\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" nextTask \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"shift\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n        nextTask`,(0,e.jsx)(n.span,{className:\"token operator\",children:\"?.\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    worker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"postMessage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsx)(n.h3,{children:\"2. Objets Transf\\xE9rables\"}),`\n`,(0,e.jsx)(n.p,{children:\"Pour de meilleures performances avec de grandes donn\\xE9es :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Cr\\xE9er un grand buffer d'array\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" buffer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"ArrayBuffer\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"100000000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Transf\\xE9rer la propri\\xE9t\\xE9 au worker (plus rapide que la copie)\"}),`\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"postMessage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"buffer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"buffer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Le buffer n'est plus utilisable dans le thread principal\"}),`\n`,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"buffer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"byteLength\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// 0\"}),`\n`]})}),`\n`,(0,e.jsx)(n.h2,{children:\"Bonnes Pratiques\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Choisir les T\\xE2ches Judicieusement\"})}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Bon candidat pour Web Worker\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" heavyTask \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"compute\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Calculs intensifs en CPU\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Pas de manipulation du DOM\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Pas de d\\xE9pendances d'\\xE9tat partag\\xE9\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Mauvais candidat pour Web Worker\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" lightTask \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"compute\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"document\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"querySelector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#result'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"innerHTML\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Termin\\xE9'\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Manipulation du DOM non autoris\\xE9e dans les workers\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Gestion des Erreurs\"})}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[\"worker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onerror\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Erreur du worker:'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// D\\xE9grader gracieusement ou red\\xE9marrer le worker\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onmessageerror\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Erreur de message:'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// G\\xE9rer les erreurs de s\\xE9rialisation des messages\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsx)(n.h2,{children:\"Gains de Performance\"}),`\n`,(0,e.jsx)(n.p,{children:\"Mesurons l'impact :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Sans Worker\"}),`\n`,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"time\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Thread Principal'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"calculatePrimes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1000000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"timeEnd\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Thread Principal'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Thread Principal: 1200ms (UI bloqu\\xE9e)\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Avec Worker\"}),`\n`,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"time\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Worker'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" worker \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Worker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'worker.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method-variable function-variable method function property-access\",children:\"onmessage\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"timeEnd\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Worker'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Worker: 1250ms (UI r\\xE9active)\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\nworker`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"postMessage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1000000\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})}),`\n`,(0,e.jsx)(n.h2,{children:\"Conclusion\"}),`\n`,(0,e.jsx)(n.p,{children:\"Les Web Workers sont un outil puissant pour maintenir des applications r\\xE9actives tout en effectuant des calculs lourds. Points cl\\xE9s \\xE0 retenir :\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Utilisez les Workers pour les t\\xE2ches intensives en CPU\"}),`\n`,(0,e.jsx)(n.li,{children:\"Impl\\xE9mentez des pools de workers pour le traitement parall\\xE8le\"}),`\n`,(0,e.jsx)(n.li,{children:\"Utilisez des objets transf\\xE9rables pour les grandes donn\\xE9es\"}),`\n`,(0,e.jsx)(n.li,{children:\"G\\xE9rez les erreurs gracieusement\"}),`\n`,(0,e.jsx)(n.li,{children:\"Mesurez les gains de performance\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Rappelez-vous que les Workers ont leurs propres limites et surco\\xFBts. Choisissez-les lorsque les avantages de l'ex\\xE9cution non bloquante l'emportent sur le co\\xFBt du passage de messages et de la gestion des threads.\"})]})}function b(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var v=b;return f(W);})();\n;return Component;"
  },
  "_id": "blog/fr/boosting-performance-with-web-workers.mdx",
  "_raw": {
    "sourceFilePath": "blog/fr/boosting-performance-with-web-workers.mdx",
    "sourceFileName": "boosting-performance-with-web-workers.mdx",
    "sourceFileDir": "blog/fr",
    "contentType": "mdx",
    "flattenedPath": "blog/fr/boosting-performance-with-web-workers"
  },
  "type": "Post",
  "url": "/fr/blog/boosting-performance-with-web-workers",
  "slug": "boosting-performance-with-web-workers"
}